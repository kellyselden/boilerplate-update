language: node_js
node_js:
- node
- '6'
branches:
  only:
  - master
  # npm version tags
  - /^v\d+\.\d+\.\d+$/
  - /^greenkeeper\/.*$/
cache:
  directories:
  - "$HOME/.npm"
before_install:
- npm config set spin false
- npm install -g npm@6
- if [ "$TRAVIS_NODE_VERSION" = "6" ]; then
    export NODE_LTS="true";
  fi
- which npx
# don't accidentally use the global npx
- rm $(which npx)
# sometimes this exists
# https://travis-ci.org/ember-cli/ember-cli-update/jobs/475792468#L96
- rm /usr/local/bin/npx || true
# test that we can't find it
- "! which npx"
script:
- npm run lint
- npm test
jobs:
  include:
  - os: osx
  - stage: Deploy
    cache: ignore
    before_install: ignore
    install: ignore
    script: ignore
    deploy:
      provider: npm
      email: kellyselden@gmail.com
      api_key:
        secure: X968IfMlehlUw8YMnX9YSxDSY+UDrll1SpHJKjPL50tHbZ2jHFXd8KhvqIHr4WBJaeHHDfvqxdYkZZIf7cq6OVzCys2TZqrsp6uK2GYVnjM4/KC7M6l0PTcFXF6i0dWKbaZN0iV3ph9aKe5c3r/y2zJSFvayAde7cKoOPWM01z3d6e45ZHhsioFfju7da97raVoycgLdClUGHsnfzkPRKrmVRQ6hcL/AMtsVAqWLojBElxUD5ZgWMQsxcg6GE469Rm14Et8Ml+mrBlZRaLX2ibFj/zVfhSUWup1v9ga6DoLfpLAOfownNSaa2XbvZfPQCMfuqDULWatkWggQxqRhp21cTyzo/t/rg2tvmBGaRIfPHNEGxff1QlrScpR8seDbGA34ovyktFTDQoXTrKRF+wvnOmrGKBKvACorgnvs3jRlDV6L/wwaeyfxkc+YKRIZYSD2dGtJSwTCZsibQ2xnmdW94b+ezwVOKJH42ZwLe02ra3TuSrzf1VxDpDuhvE7+hJqXZ3ZPhnhtQ+pMc0pqcZJuiZabAsMcCd29RNGihARvZQsXOqCngsR4hLGraU9aiTKL+86YGCyHJavmCb0AgwnEo9gJxxdLmsbCA8wFT8gXoA0LpUlLBT/HlkxL3u+uOYlfcBOOuqZSXW/25CsGkGTOlo9eNCWjlvUV8eKMBxk=
      on:
        tags: true
        repo: kellyselden/boilerplate-update
